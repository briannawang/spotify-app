"use strict";(self.webpackChunkspotify_app=self.webpackChunkspotify_app||[]).push([[738],{738:function(e,s,a){a.r(s),a.d(s,{default:function(){return m}});var t=a(152),n=a(791),r=(a(508),a(890)),i=a(184),u={acousticness:0,danceability:0,energy:0,instrumentalness:0,liveness:0,speechiness:0,valence:0},c={acousticness:"",danceability:"",energy:"",instrumentalness:"",liveness:"",speechiness:"",valence:""},l={tempo:0,key:0,mode:0,time_signature:0,loudness:0,uri:""},o={tempo:0,key:"",mode:"",time_signature:"",loudness:0,uri:""};function d(e){var s=e.featureKey,a=e.featureValue,t=e.analyzedFeatureValue;return(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{className:"feature_key",children:s.replace("_"," ")}),(0,i.jsx)("td",{className:"feature_value",id:t,children:a})]})}function h(e){for(var s=e.audioFeatures,a=e.analyzedAudioFeatures,t=Object.keys(u),n=[],r=0;r<t.length;r++)n.push((0,i.jsx)(d,{featureKey:t[r],featureValue:s[t[r]],analyzedFeatureValue:a[t[r]]}));return(0,i.jsx)("table",{className:"feature_list",children:n})}function y(e){for(var s=e.analyzedAudioStructures,a=Object.keys(l),t=[],n=1;n<5;n++)t.push((0,i.jsx)(d,{featureKey:a[n],featureValue:s[a[n]],analyzedFeatureValue:"audio-structure"}));return(0,i.jsxs)("div",{className:"structure-display",children:[(0,i.jsxs)("table",{className:"structure-vertical",children:[(0,i.jsx)("tr",{children:(0,i.jsx)("td",{className:"tempo-td",children:"tempo"})}),(0,i.jsx)("tr",{children:(0,i.jsxs)("td",{className:"tempo-value",children:[s.tempo,(0,i.jsx)("mark",{className:"bpm-td",children:"bpm"})]})})]}),(0,i.jsx)("table",{className:"structure_list",children:t})]})}var m=function(e){var s=e.token,a=e.current_track,d=e.is_pausedRef,m=(0,n.useState)(u),p=(0,t.Z)(m,2),k=p[0],f=p[1],v=(0,n.useState)(c),b=(0,t.Z)(v,2),g=b[0],j=b[1],x=(0,n.useState)(l),_=(0,t.Z)(x,2),F=_[0],N=_[1],w=(0,n.useState)(l),A=(0,t.Z)(w,2),S=A[0],z=A[1],V=(0,n.useState)(!0),C=(0,t.Z)(V,2),Z=C[0],B=C[1],E=a.id;return(0,n.useEffect)((function(){r.ajax({url:"https://api.spotify.com/v1/audio-features/"+E,type:"GET",beforeSend:function(e){e.setRequestHeader("Authorization","Bearer "+s),e.setRequestHeader("Content-Type","application/json")},success:function(e){e?(f(e),function(e,s){c.acousticness=e.acousticness>.8?"very_high":e.acousticness>.6?"high":e.acousticness>.2?"low":"not",c.danceability=e.danceability>.75?"very_high":e.danceability>.5?"high":e.danceability>.15?"low":"not",c.energy=e.energy>.75?"very_high":e.energy>.5?"high":e.energy>.15?"low":"not",c.instrumentalness=e.instrumentalness>.65?"very_high":e.instrumentalness>.5?"high":e.instrumentalness>.35?"low":"not",c.liveness=e.liveness>.9?"very_high":e.liveness>.8?"high":e.liveness>.6?"low":"not",c.speechiness=e.speechiness>.66?"very_high":e.speechiness>.47?"high":e.speechiness>.33?"low":"not",c.valence=e.valence>.75?"very_high":e.valence>.5?"high":e.valence>.25?"low":"not",s(c)}(e,j),N(e),function(e,s){switch(o.tempo=Math.round(e.tempo),o.mode=1==e.mode?"major":"minor",o.time_signature=e.time_signature+"/4",o.loudness=Math.round(10*e.tempo)/10+" dB",e.key){case-1:o.key="n/a";break;case 0:o.key="C";break;case 1:o.key="C\u266f/D\u266d";break;case 2:o.key="D";break;case 3:o.key="D\u266f/E\u266d";break;case 4:o.key="E";break;case 5:o.key="F";break;case 6:o.key="F\u266f/G\u266d";break;case 7:o.key="G";break;case 8:o.key="G\u266f/A\u266d";break;case 9:o.key="A";break;case 10:o.key="A\u266f/B\u266d";break;case 11:o.key="B"}s(o)}(e,z),B(!1),d||document.querySelector(":root").style.setProperty("--tempo",60/e.tempo*e.time_signature+"s")):B(!0)}})}),[a]),Z?(0,i.jsx)(i.Fragment,{}):(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:"TrackAudioInfo",children:[(0,i.jsx)(h,{audioFeatures:k,analyzedAudioFeatures:g}),(0,i.jsx)(y,{analyzedAudioStructures:S}),(0,i.jsx)("a",{className:"track-uri",href:F.uri,children:F.uri})]})})}}}]);
//# sourceMappingURL=738.d05aa345.chunk.js.map