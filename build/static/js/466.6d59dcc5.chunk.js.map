{"version":3,"file":"static/js/466.6d59dcc5.chunk.js","mappings":"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","sources":["../node_modules/color.js/dist/color.esm.js","components/WebPlayback.jsx"],"sourcesContent":["var getSrc = item => typeof item === 'string' ? item : item.src;\n\nvar getArgs = ({\n  amount = 3,\n  format = 'array',\n  group = 20,\n  sample = 10\n} = {}) => ({\n  amount,\n  format,\n  group,\n  sample\n});\n\nvar format = (input, args) => {\n  var list = input.map(val => {\n    var rgb = Array.isArray(val) ? val : val.split(',').map(Number);\n    return args.format === 'hex' ? rgbToHex(rgb) : rgb;\n  });\n  return args.amount === 1 || list.length === 1 ? list[0] : list;\n};\n\nvar group = (number, grouping) => {\n  var grouped = Math.round(number / grouping) * grouping;\n  return Math.min(grouped, 255);\n};\n\nvar rgbToHex = rgb => '#' + rgb.map(val => {\n  var hex = val.toString(16);\n  return hex.length === 1 ? '0' + hex : hex;\n}).join('');\n\nvar getImageData = src => new Promise((resolve, reject) => {\n  var canvas = document.createElement('canvas');\n  var context = canvas.getContext('2d');\n  var img = new Image();\n\n  img.onload = () => {\n    canvas.height = img.height;\n    canvas.width = img.width;\n    context.drawImage(img, 0, 0);\n    var data = context.getImageData(0, 0, img.width, img.height).data;\n    resolve(data);\n  };\n\n  img.onerror = () => reject(Error('Image loading failed.'));\n\n  img.crossOrigin = '';\n  img.src = src;\n});\n\nvar getAverage = (data, args) => {\n  var gap = 4 * args.sample;\n  var amount = data.length / gap;\n  var rgb = {\n    r: 0,\n    g: 0,\n    b: 0\n  };\n\n  for (var i = 0; i < data.length; i += gap) {\n    rgb.r += data[i];\n    rgb.g += data[i + 1];\n    rgb.b += data[i + 2];\n  }\n\n  return format([[Math.round(rgb.r / amount), Math.round(rgb.g / amount), Math.round(rgb.b / amount)]], args);\n};\n\nvar getProminent = (data, args) => {\n  var gap = 4 * args.sample;\n  var colors = {};\n\n  for (var i = 0; i < data.length; i += gap) {\n    var rgb = [group(data[i], args.group), group(data[i + 1], args.group), group(data[i + 2], args.group)].join();\n    colors[rgb] = colors[rgb] ? colors[rgb] + 1 : 1;\n  }\n\n  return format(Object.entries(colors).sort(([_keyA, valA], [_keyB, valB]) => valA > valB ? -1 : 1).slice(0, args.amount).map(([rgb]) => rgb), args);\n};\n\nvar process = (handler, item, args) => new Promise((resolve, reject) => getImageData(getSrc(item)).then(data => resolve(handler(data, getArgs(args)))).catch(error => reject(error)));\n\nvar average = (item, args) => process(getAverage, item, args);\n\nvar prominent = (item, args) => process(getProminent, item, args);\n\nexport { average, prominent };\n","import React, { useState, useEffect, useRef } from 'react';\nimport './Player.css';\nimport './../App.css';\nimport { prominent } from 'color.js'\nimport * as $ from \"jquery\";\n\nconst TrackAudioInfo = React.lazy(() => import('./TrackAudioInfo'));\nconst PlaylistView = React.lazy(() => import('./PlaylistView'));\n\nconst track = {\n    uri: \"\",\n    id: \"\",\n    name: \"\",\n    album: {\n        images: [\n            { url: \"\" }\n        ]\n    },\n    artists: [\n        { name: \"\" }\n    ],\n    duration_ms: 0\n}\n\nconst transferPlayback = (device_id, token) => {\n    if (device_id != \"\") {\n        $.ajax({\n            url: \"https://api.spotify.com/v1/me/player\",\n            type: \"PUT\",\n            data: '{\"device_ids\":[\"'+ device_id + '\"]}',\n            beforeSend: xhr => {\n            xhr.setRequestHeader(\"Authorization\", \"Bearer \" + token);\n            xhr.setRequestHeader(\"Content-Type\", \"application/json\");\n            }\n        });\n\n        console.log(\"TRANSFERRED PLAYBACK\");\n    }\n}\n\nfunction millisToMinutesAndSeconds(millis) {\n    var minutes = Math.floor(millis / 60000);\n    var seconds = ((millis % 60000) / 1000).toFixed(0);\n    return minutes + \":\" + (seconds < 10 ? '0' : '') + seconds;\n}\n\nfunction hslToHex([h, s, l]) {\n    l /= 100;\n    const a = s * Math.min(l, 1 - l) / 100;\n    const f = n => {\n      const k = (n + h / 30) % 12;\n      const color = l - a * Math.max(Math.min(k - 3, 9 - k, 1), -1);\n      return Math.round(255 * color).toString(16).padStart(2, '0');   // convert to Hex and prefix \"0\" if needed\n    };\n    return `#${f(0)}${f(8)}${f(4)}`;\n}\n\nconst rgbToHsl = ([r, g, b]) => {\n    r /= 255;\n    g /= 255;\n    b /= 255;\n    const l = Math.max(r, g, b);\n    const s = l - Math.min(r, g, b);\n    const h = s\n      ? l === r\n        ? (g - b) / s\n        : l === g\n        ? 2 + (b - r) / s\n        : 4 + (r - g) / s\n      : 0;\n    return [\n      60 * h < 0 ? 60 * h + 360 : 60 * h,\n      100 * (s ? (l <= 0.5 ? s / (2 * l - s) : s / (2 - (2 * l - s))) : 0),\n      (100 * (2 * l - s)) / 2,\n    ];\n};\n\nfunction darkenSwatch ([h, s, l]) {\n    var subS = s > 30 ? 10 + (s/25) : s/3;\n    var subL = l > 20 ? 10 + (l/30): s/3;\n\n    return [ h, s - subS, l - subL];\n}\n\nfunction swatchColours(track) {\n    prominent(track.album.images[0].url, { amount: 15 }, { group: 30 }, { sample: 20 }).then(colors => {\n        var swatch = [0, 0, 0];\n        var foundSwatch = false;\n\n        for (let i = 0; i < colors.length; i++) {\n            var hslcolor = rgbToHsl(colors[i]);\n\n            if (hslcolor[1] > swatch[1] && hslcolor[2] > 25) {\n                swatch = hslcolor;\n                foundSwatch = true;\n\n                if (swatch[1] < 30 && swatch[1] > 5) {\n                    swatch[1] = 30;\n                } else if (swatch[1] <= 5 ) {\n                    swatch[1] *= 1.7;\n                } else if (swatch[1] > 50) {\n                    swatch[1] = swatch[1] * 1.3 > 100 ? 100 : swatch[1] * 1.3;\n                }\n            \n                if (swatch[2] < 50) {\n                    swatch[2] = 50;\n                }\n\n                document.documentElement.style.setProperty('--swatch', hslToHex(swatch));\n                document.documentElement.style.setProperty('--dark_swatch', hslToHex(darkenSwatch(swatch)));\n\n                break;\n            }\n        }\n\n        if (!foundSwatch) {\n            document.documentElement.style.setProperty('--swatch', '#FFFFFF');\n            document.documentElement.style.setProperty('--dark_swatch', '#B9BBC7');\n        }\n    }).catch (() => {\n        document.documentElement.style.setProperty('--swatch', '#FFFFFF');\n        document.documentElement.style.setProperty('--dark_swatch', '#B9BBC7');\n    })\n}\n\nfunction WebPlayback({token, userProfile}) {\n    const is_pausedRef = useRef(true);\n    const [is_active, setActive] = useState(false);\n    const [player, setPlayer] = useState(undefined);\n    const [current_track, setTrack] = useState(track);\n    const [progress_ms, setProgress] = useState(0);\n    const [duration_ms, setDuration] = useState(0);\n    const [device_id, setDeviceId] = useState(\"\");\n\n    const [showSidebar, setShownSidebar] = useState(false);\n\n    const handleShowSideBar = () => {\n        if (is_active) {\n            setShownSidebar(current => !current);\n        }\n    }\n\n    const progressBarStyles = {\n        width: (progress_ms * 100 / duration_ms) + '%'\n    };\n\n    useEffect(() => {\n\n        const script = document.createElement(\"script\");\n        script.src = \"https://sdk.scdn.co/spotify-player.js\";\n        script.async = true;\n\n        document.body.appendChild(script);\n\n        if (!is_active){\n            window.onSpotifyWebPlaybackSDKReady = () => {\n\n                var player = new window.Spotify.Player({\n                    name: 'spotify app',\n                    getOAuthToken: cb => { \n                        console.log(\"token got \" + token)\n                        cb(token)\n                     },\n                    volume: 0.4\n                });\n    \n                setPlayer(player);\n    \n                player.addListener('ready', ({ device_id }) => {\n                    setDeviceId(device_id);\n                    console.log('Ready with Device ID', device_id);\n                });\n    \n                player.addListener('not_ready', ({ device_id }) => {\n                    console.log('Device ID has gone offline', device_id);\n                });\n    \n                player.addListener('player_state_changed', ( state => {\n                    if (!state) {\n                        return;\n                    }\n    \n                    if (current_track !== state.track_window.current_track) {\n                        $.ajax({\n                            url: \"https://api.spotify.com/v1/me/player\",\n                            type: \"GET\",\n                            beforeSend: xhr => {\n                            xhr.setRequestHeader(\"Authorization\", \"Bearer \" + token);\n                            xhr.setRequestHeader(\"Content-Type\", \"application/json\");\n                            },\n                \n                            success: data => {\n                                if(data) {\n                                    setDuration(data.item.duration_ms);\n                                }\n                            }\n                        });\n    \n                        setTrack(state.track_window.current_track);\n                        swatchColours(state.track_window.current_track);\n                    }\n    \n                    setProgress(state.position);\n                    is_pausedRef.current = state.paused;\n    \n                    player.getCurrentState().then( state => { \n                        (!state)? setActive(false) : setActive(true) \n                    });\n    \n                }));\n    \n                player.connect();\n            }\n        }\n\n        const interval = setInterval(() => {\n            if (!is_pausedRef.current) {\n                setProgress(p => p + 100);\n            }\n        }, 100, !is_pausedRef.current);\n\n        return () => {\n            clearInterval(interval);\n        }\n    }, []);\n\n        return (\n            <div className=\"container\">\n                {(is_active) ?\n                <div className=\"main-wrapper\">\n                    <img src={current_track.album.images[0].url} className=\"now-playing__img\" alt=\"\"/>\n\n                    <div className=\"now-playing__side\">\n                        <div className=\"now-playing__name\">{current_track.name}</div>\n                        <div className=\"now-playing__artist\">{current_track.artists[0].name}{current_track.artists[1] && \", \" + current_track.artists[1].name}</div>\n                        \n                        <div className=\"control-btns\">\n                            <button className=\"btn-spotify\" onClick={() => { player.previousTrack() }} >\n                                ◄⏽\n                            </button>\n\n                            <button className=\"btn-spotify\" id=\"toggle-play\" onClick={() => { player.togglePlay() }} >\n                                { is_pausedRef.current ? \"play\" : \"pause\" }\n                            </button>\n\n                            <button className=\"btn-spotify\" onClick={() => { player.nextTrack() }} >\n                                ⏽►\n                            </button>\n                        </div>\n\n                        <div className=\"song-timeinfo\">\n                            <div className=\"progress-background\">\n                            <div className=\"progress\">\n                                <div\n                                className=\"progress__bar\"\n                                style={progressBarStyles}\n                                />\n                            </div>\n                            </div>\n                            <div className=\"song-progress\">\n                                <p className=\"song-progress__position\">{millisToMinutesAndSeconds(progress_ms)}</p>\n                                <p className=\"song-progress__duration\">{millisToMinutesAndSeconds(duration_ms)}</p>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                : <div className=\"main-wrapper\"><p id=\"background-text-color\" onClick={() => { transferPlayback(device_id, token) }}> transfer playback device </p></div>}\n                {(!is_active || showSidebar) ?\n                    <PlaylistView token={token} userId={userProfile.id}/>\n                    :\n                    <div className=\"TrackAudioInfo\">\n                        <TrackAudioInfo token={token} current_track={current_track} is_pausedRef={is_pausedRef.current}/>\n                    </div>\n                }\n                <button className=\"sidebar_button\" onClick={() => { handleShowSideBar() }}>◼</button>\n            </div>\n        );\n}\n\nexport default WebPlayback\n"],"names":["format","input","args","list","map","val","rgb","Array","isArray","split","Number","rgbToHex","amount","length","group","number","grouping","grouped","Math","round","min","hex","toString","join","getProminent","data","gap","sample","colors","i","Object","entries","sort","valA","slice","process","handler","item","Promise","resolve","reject","src","getSrc","canvas","document","createElement","context","getContext","img","Image","onload","height","width","drawImage","getImageData","onerror","Error","crossOrigin","then","getArgs","catch","error","TrackAudioInfo","React","PlaylistView","track","uri","id","name","album","images","url","artists","duration_ms","millisToMinutesAndSeconds","millis","minutes","floor","seconds","toFixed","hslToHex","h","s","l","a","f","n","k","color","max","padStart","rgbToHsl","r","g","b","darkenSwatch","swatchColours","swatch","foundSwatch","hslcolor","documentElement","style","setProperty","token","userProfile","is_pausedRef","useRef","useState","is_active","setActive","undefined","player","setPlayer","current_track","setTrack","progress_ms","setProgress","setDuration","device_id","setDeviceId","showSidebar","setShownSidebar","progressBarStyles","useEffect","script","async","body","appendChild","window","onSpotifyWebPlaybackSDKReady","Spotify","Player","getOAuthToken","cb","console","log","volume","addListener","state","track_window","$","type","beforeSend","xhr","setRequestHeader","success","position","current","paused","getCurrentState","connect","interval","setInterval","p","clearInterval","className","alt","onClick","previousTrack","togglePlay","nextTrack","transferPlayback","userId"],"sourceRoot":""}